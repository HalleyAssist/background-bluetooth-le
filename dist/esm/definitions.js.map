{"version":3,"file":"definitions.js","sourceRoot":"","sources":["../../src/definitions.ts"],"names":[],"mappings":"AAgGA;;GAEG;AACH,MAAM,CAAN,IAAY,QAqBX;AArBD,WAAY,QAAQ;IAClB;;;OAGG;IACH,0DAAkB,CAAA;IAClB;;;OAGG;IACH,iDAAa,CAAA;IACb;;;OAGG;IACH,+CAAY,CAAA;IACZ;;;OAGG;IACH,qDAAe,CAAA;AACjB,CAAC,EArBW,QAAQ,KAAR,QAAQ,QAqBnB","sourcesContent":["import type { PermissionState, Plugin, PluginListenerHandle } from '@capacitor/core';\n\n/**\n * The permission state\n *\n * The permission state is a string that can be one of the following:\n * - 'granted': The permission is granted\n * - 'denied': The permission is denied\n * - 'prompt': The permission is prompt\n * - 'unavailable': The permission is unavailable\n *\n * @since 1.0.0\n */\nexport interface PermissionStatus {\n  bluetooth: PermissionState;\n  notifications: PermissionState;\n}\n\n/**\n * A device\n *\n * @since 1.0.0\n */\nexport interface Device {\n  /**\n   * The serial of the device\n   */\n  serial: string;\n  /**\n   * The display name of the device\n   */\n  name: string;\n  /**\n   * The RSSI of the device\n   *\n   * -127 = device is not in range\n   */\n  rssi: number;\n  /**\n   * The TX power of the device\n   *\n   * -127 = unknown TX power\n   */\n  txPower: number;\n  /**\n   * The last time the device was updated\n   *\n   * in milliseconds since epoch\n   */\n  lastUpdated: number;\n}\n\n/**\n * The options to add a device\n *\n * Only requires the serial and name of the device\n *\n * @since 1.0.0\n */\nexport interface AddDeviceOptions {\n  /**\n   * The serial of the device\n   */\n  serial: string;\n  /**\n   * The display name of the device\n   */\n  name: string;\n}\n\n/**\n * The options to add multiple devices\n *\n * @since 1.0.0\n */\nexport interface AddDevicesOptions {\n  /**\n   * The devices to add to the list of devices to scan for\n   */\n  devices: AddDeviceOptions[];\n}\n\n/**\n * The options to remove a device\n *\n * Only requires the serial of the device\n *\n * @since 1.0.0\n */\nexport interface RemoveDeviceOptions {\n  /**\n   * The serial of the device\n   */\n  serial: string;\n}\n\n/**\n * The scan mode, taken from the Android API\n */\nexport enum ScanMode {\n  /**\n   * A special Bluetooth LE scan mode.\n   * Applications using this scan mode will passively listen for other scan results without starting BLE scans themselves.\n   */\n  OPPORTUNISTIC = -1,\n  /**\n   * Perform Bluetooth LE scan in low power mode.\n   * This is the default scan mode as it consumes the least power.\n   */\n  LOW_POWER = 0,\n  /**\n   * Perform Bluetooth LE scan in balanced power mode.\n   * Scan results are returned at a rate that provides a good trade-off between scan frequency and power consumption.\n   */\n  BALANCED = 1,\n  /**\n   * Scan for Bluetooth LE devices using a high duty cycle.\n   * It's recommended to only use this mode when the application is running in the foreground.\n   */\n  LOW_LATENCY = 2,\n}\n\n/**\n * The scan configuration\n */\nexport interface ScanConfig {\n  /**\n   * The scan mode\n   *\n   * @see ScanMode\n   *\n   * @default ScanMode.LOW_POWER\n   */\n  mode: ScanMode;\n  /**\n   * The debug mode\n   *\n   * @default false\n   */\n  debug: boolean;\n  /**\n   * The device timeout in milliseconds\n   *\n   * If a device has not had a scan result for this amount of time, it will be assumed to be out of range and will be pushed down the list\n   *\n   * @default 30000\n   */\n  deviceTimeout: number;\n  /**\n   * The minimum RSSI to consider a device in range\n   *\n   * If a device has an RSSI below this value, it will be considered out of range\n   *\n   * The value is clamped to the range of -10 to -100.\n   *\n   * @default -100\n   */\n  threshold: number;\n}\n\n/**\n * The options to set the configuration\n */\nexport interface SetConfigOptions {\n  /**\n   * The configuration to set\n   */\n  config: Partial<ScanConfig>;\n}\n\n/**\n * The list of devices\n */\nexport interface Devices {\n  /**\n   * The list of devices\n   */\n  devices: Device[];\n}\n\n/**\n * The result of starting or stopping the background scanner\n */\nexport interface StartStopResult {\n  /**\n   * The result of starting or stopping the background scanner\n   */\n  result: string;\n}\n\n/**\n * The result of checking if the background scanner is running\n */\nexport interface RunningResult {\n  /**\n   * The result of checking if the background scanner is running\n   */\n  running: boolean;\n}\n\n/**\n * The result of checking if the user stopped the background scanner\n */\nexport interface UserStoppedResult {\n  /**\n   * The result of checking if the user stopped the background scanner\n   */\n  userStopped: boolean;\n}\n\n/**\n * The current configuration of the scanner\n */\nexport interface Config {\n  /**\n   * The result of getting the scanner configuration\n   */\n  config: ScanConfig;\n}\n\n/**\n * A listener that is called when the list of devices changes\n */\nexport type DevicesChangedListener = (devices: Devices) => void;\n\n/**\n * The background BLE plugin\n */\nexport interface BackgroundBLEPlugin extends Plugin {\n  checkPermissions(): Promise<PermissionStatus>;\n  requestPermissions(): Promise<PermissionStatus>;\n  /**\n   * Initialise the background scanner\n   *\n   * @param options The options to initialise the background scanner\n   */\n  initialise(): Promise<void>;\n  /**\n   * Enable bluetooth\n   *\n   * @returns A promise that resolves when bluetooth is enabled\n   */\n  enable(): Promise<void>;\n  /**\n   * Get the current list of devices\n   */\n  getDevices(): Promise<Devices>;\n  /**\n   * Set the list of devices to scan for\n   *\n   * @param devices The devices to scan for\n   * @returns The new list of devices\n   */\n  setDevices(options: AddDevicesOptions): Promise<Devices>;\n  /**\n   * Clear the list of devices to scan for\n   *\n   * @returns The list of devices\n   */\n  clearDevices(): Promise<Devices>;\n  /**\n   * Start the background scanner\n   *\n   * @returns The result of starting the background scanner\n   */\n  startForegroundService(): Promise<StartStopResult>;\n  /**\n   * Stop the background scanner\n   */\n  stopForegroundService(): Promise<StartStopResult>;\n  /**\n   * Is the background scanner running\n   *\n   * @returns The result of whether the background scanner is running\n   */\n  isRunning(): Promise<RunningResult>;\n  /**\n   * Did the user stop the background scanner from the notification\n   *\n   * @returns The result of whether the user stopped the background scanner\n   */\n  didUserStop(): Promise<UserStoppedResult>;\n\n  /**\n   * Get the scanner configuration\n   *\n   * @returns The scanner configuration\n   */\n  getConfig(): Promise<Config>;\n  /**\n   * Set the scanner configuration\n   *\n   * @param options The options to set the scanner configuration\n   * @returns The new scanner configuration\n   */\n  setConfig(options: SetConfigOptions): Promise<Config>;\n  /**\n   * Add a listener for when the list of devices changes\n   *\n   * @param event The listener function to call when the list of devices changes\n   * @returns A handle to remove the listener\n   */\n  addListener(eventName: 'devicesChanged', event: DevicesChangedListener): Promise<PluginListenerHandle>;\n  /**\n   * Add a listener for when the list of close devices changes\n   *\n   * This list only includes devices that are within the configured RSSI threshold.\n   *\n   * @param event The listener function to call when the list of close devices changes\n   * @returns A handle to remove the listener\n   */\n  addListener(eventName: 'closeDevicesChanged', event: DevicesChangedListener): Promise<PluginListenerHandle>;\n}\n"]}